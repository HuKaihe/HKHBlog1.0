define(["jquery","handlebars","tab-operation","system-config"],function(d,e,b,c){function a(){d.get("/views/static/HKHFrame/menu.json",null,function(i){var f=i;var h=e.compile(d("#navigationTemplate").prop("text"));d(".navigation").append(h(f));var g=e.compile(d("#navigationToolsTemplate").prop("text"));e.registerHelper("hasTriangle",function(k,j){if(k==0){return j.fn(this)}else{return j.inverse(this)}});d(".navigationTools").append(g(f));d(".navigation a,.navigationTools a").click(function(){var j=d(this).data("url"),k=this.name;if(j){var l=e.compile(d("#frameTemplate").prop("text")),m=0;d(".main-block iframe").each(function(){if(k==d(this).prop("name")){m=1;return false}}).hide();if(m==1){d(".main-block iframe[name=frame"+k+"]").show().css({left:50,opacity:0}).animate({left:0,opacity:1},500);if(c.myConfig.frameRefresh==1){b.refreshTheFrame(k)}}else{d(l({url:j,frame_id:k})).css({left:50,opacity:0}).animate({left:0,opacity:1},500).appendTo(d(".main-block"))}m=0}});d(".navigation a").click(function(){var l=d(this).parent(),k=l.find(".second-menu").length,j=l.find(".third-menu").length;if(length){l.siblings().find(".navButton-spread").removeClass("fa-angle-up").addClass("fa-angle-down");d(this).find(".navButton-spread").toggleClass("fa-angle-down").toggleClass("fa-angle-up");l.siblings().find("a").removeClass("navButton-active navButton-second-active");if(k>=1){d(this).toggleClass("navButton-active")}else{if(j>=1){d(this).toggleClass("navButton-second-active")}}l.siblings().find("ul").slideUp(150);l.find("ul").eq(0).slideToggle(150)}});d(".navigationTools li a").hover(function(){var j=d(this).parent();j.siblings().find("ul").hide();j.find("ul").eq(0).show()}).click(function(){if(d(this).data("url")&&!d(this).parent().find("ul").length){d(".navigationTools ul").hide()}});d(".navigationTools .tools-third-menu,.navigationTools .tools-second-menu").mouseleave(function(){d(this).hide()})});d(".navButton-stretch").click(function(){d(".left-block-container").hide(70);d(".left-tools").show(70)});d(".navButton-shrink").click(function(){d(".left-tools").hide(70);d(".left-block-container").show(70,function(){b.checkAndDeleteTabByLength()})});d("body").click(function(){d(".secondChildToolsFunction").hide();d(".thirdChildToolsFunction").hide()})}return{initializeNavigation:a}});